image: node:16-alpine

default:
  tags:
    - gitlab-runner-ec2

stages:
  - build
  - test

# ui-components-admin jobs
ui-components-admin build:
  stage: build
  script:
    - yarn install && yarn nx build ui-components-admin

ui-components-admin test:
  stage: test
  script:
    - yarn install && yarn nx test ui-components-admin

# admin jobs
admin build:
  stage: build
  script:
    - yarn install && yarn nx build admin

admin test:
  stage: test
  script:
    - yarn install && yarn nx test admin


# voting jobs
voting build:
  stage: build
  script:
    - yarn install && yarn nx build voting

voting test:
  stage: test
  script:
    - yarn install && yarn nx test voting


  environment: production
